# ============================================================================
# P2P Procurement System - Production Environment Variables
# ============================================================================
COMPOSE_PROJECT_NAME=p2p_procurement
ENVIRONMENT=production

# Enable build optimizations
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1
SKIP_COLLECTSTATIC=false

# ============================================================================
# Database (PostgreSQL)
# ============================================================================
DATABASE_NAME=p2p_procurement
DATABASE_USER=postgres
DATABASE_PASSWORD=${DATABASE_PASSWORD:?set in AWS Secrets Manager or SSM}
DATABASE_PORT=5432
DATABASE_HOST=db

DATABASE_URL=postgresql://postgres:${DATABASE_PASSWORD}@db:5432/p2p_procurement

# ============================================================================
# Redis (Cache + Celery)
# ============================================================================
REDIS_PASSWORD=${REDIS_PASSWORD:?store securely}
REDIS_PORT=6379
REDIS_HOST=redis

REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@redis:6379/2
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@redis:6379/3

# ============================================================================
# Django Core Settings
# ============================================================================
SECRET_KEY=${SECRET_KEY:?must be set in deployment}
DJANGO_SETTINGS_MODULE=config.settings.production
DEBUG=False

DJANGO_LOG_TO_FILE=true
LOG_LEVEL=INFO

# ============================================================================
# Django Host & API Exposure
# ============================================================================
ALLOWED_HOSTS=52.90.60.36,ec2-52-90-60-36.compute-1.amazonaws.com,localhost
CSRF_TRUSTED_ORIGINS=http://52.90.60.36,http://ec2-52-90-60-36.compute-1.amazonaws.com

BACKEND_PORT=8000
NGINX_PORT=80

# ============================================================================
# Gunicorn (Production WSGI)
# ============================================================================
GUNICORN_WORKERS=3
GUNICORN_THREADS=3
GUNICORN_WORKER_CLASS=sync
GUNICORN_TIMEOUT=600

# ============================================================================
# Celery Workers
# ============================================================================
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_LOG_LEVEL=info

# ============================================================================
# Frontend (React/Vite)
# ============================================================================
VITE_API_BASE_URL=http://52.90.60.36/api
VITE_APP_TITLE=P2P Procurement System

# ============================================================================
# Static & Media
# ============================================================================
STATIC_ROOT=/app/src/staticfiles
MEDIA_ROOT=/app/media
STATIC_URL=/static/
MEDIA_URL=/media/

# ============================================================================
# Production Security
# (Change to True once HTTPS or ALB/Load Balancer installed)
# ============================================================================
SECURE_SSL_REDIRECT=False
SECURE_HSTS_SECONDS=0
SECURE_HSTS_INCLUDE_SUBDOMAINS=False
SECURE_HSTS_PRELOAD=False

SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False

X_FRAME_OPTIONS=DENY

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_API_DOCS=true
